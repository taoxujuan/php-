<?php    require('check_token.php');    header("Content-Type:text/html;charset=UTF-8");    date_default_timezone_set("PRC");    $jsonpcallback = htmlspecialchars($_REQUEST ['jsonpcallback']);    $showapi_appid = '36516';  //替换此值,在官网的"我的应用"中找到相关值    $showapi_secret = '310d4a40d45e4b589574f5461ac976fc';  //替换此值,在官网的"我的应用"中找到相关值    $code = $_POST['code'];    //echo $code;    $paramArr = array(         'showapi_appid'=> $showapi_appid,         'code'=> $code         //'code'=>'6938166920785'         //添加其他参数    );         //创建参数(包括签名的处理)    function createParam ($paramArr,$showapi_secret) {         $paraStr = "";         $signStr = "";         ksort($paramArr);         foreach ($paramArr as $key => $val) {             if ($key != '' && $val != '') {                 $signStr .= $key.$val;                 $paraStr .= $key.'='.urlencode($val).'&';             }         }         $signStr .= $showapi_secret;//排好序的参数加上secret,进行md5         $sign = strtolower(md5($signStr));         $paraStr .= 'showapi_sign='.$sign;//将md5后的值作为参数,便于服务器的效验         //echo "排好序的参数:".$signStr."<br>\r\n";         return $paraStr;    }        $param = createParam($paramArr,$showapi_secret);    $url = 'http://route.showapi.com/66-22?'.$param;     $result= file_get_contents($url);    $result_code = json_decode($result);    $users=array();    //print_r($result);    //print_r($result->showapi_res_body->goodsName) ;    $flag = $result_code ->showapi_res_body->flag;    if ($flag) {        $code = 1;        $spec = $result_code->showapi_res_body->spec;        if (isset($spec)) {        }else {           $spec = "空";        }        $goodsName = $result_code->showapi_res_body->goodsName;        if (isset($goodsName)) {        }else {            $goodsName = "空";        }        $ret_code = $result_code->showapi_res_body->ret_code;        if (isset($ret_code)) {        }else {           $ret_code = "空";        }        $price = $result_code->showapi_res_body->price;        if (isset($price)) {        }else {           $price = "空";        }        $trademark = $result_code->showapi_res_body->trademark;        if (isset($trademark)) {        }else {           $trademark = "空";        }        $img = $result_code->showapi_res_body->img;        if (isset($img)) {        }else {           $img = "空";        }        $pd_code = $result_code->showapi_res_body->code;        if (isset($pd_code)) {        }else {           $pd_code = "空";        }        $zzjb = $result_code->showapi_res_body->zzjb;        if (isset($zzjb)) {        }else {           $zzjb = "空";        }        $note = $result_code->showapi_res_body->note;        if (isset($note)) {        }else {           $note = "空";        }         $flag = $result_code->showapi_res_body->flag;        if (isset($flag)) {        }else {           $flag = "空";        }        $users= array("spec" => $spec,"goodsName" => $goodsName,"ret_code" => $ret_code,"price" => $price,"flag" => $flag,"trademark" => $trademark,"img" => $img,"code" => $pd_code,"zzjb" => $zzjb,"note" => $note);         $result =  array(         "code" => "success",        //         "data" => $users       //列表        );   $json_data= json_encode($result);   echo $jsonpcallback . "(" . $json_data . ")";      }    else {    	 $result =  array();    	 echo json_encode($result);    }        ?>